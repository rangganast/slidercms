{% extends 'app/base.html' %}

{% load static %}

{% block title %}Keyword Counter{% endblock title %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/keyword.css' %}">
{% endblock style %}

{% block contentheader %}Keyword Counter{% endblock contentheader %}

{% block content %}

<fieldset class="scheduler-border">
    
    <legend class="scheduler-border">Filter</legend>
    
    <div class="control-group mb-3 ml-2">
        <form method="GET">
            <div class="row">
                <div class="form-inline">
                    <label for="datepicker1">Tanggal :</label>
                    <input name="date1"class="form-control ml-3" id="datepicker1" placeholder="DD-MM-YY"
                        autocomplete="off" required {% if date1 %}value="{{date1}}"{% else %}value=""{% endif %} />

                    <label class="ml-3" for="datepicker2"> s/d </label>
                    <input name="date2"class="form-control ml-3" id="datepicker2"
                        placeholder="DD-MM-YY" autocomplete="off" required {% if date1 %}value="{{date1}}"{% else %}value=""{% endif %} />

                    <button name="filter" type="submit" class="btn btn-sm btn-primary ml-3">Terapkan</button>
                    <button id="resetFilter" name="reset" type="button" class="btn btn-sm btn-secondary ml-2">Reset Filter</button>
                </div>
            </div>
        </form>
    </div>
        
    <div class="control-group mb-3">
        <div class="row">
            <div class="col-sm-3 no-padding">
                <div class="input-group">
                    <select id="app_filter" class="form-control">
                        <option value="">Cari Aplikasi</option>
                        {% for app in apps %}
                        <option value="{{app.id}}">{{app.name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
    </div>
        
    <div class="control-group">
        <div class="row">
            <div class="col input-wrapper">
                <input id="myInputTextField" type="text"
                    class="form-control form-control-borderless searchinput" placeholder="Cari keyword...">
                <span class="fas fa-search searchspan"></span>
            </div>
        </div>
    </div>

</fieldset>

<table id="keywordTable" class="table table-sm table-striped table-bordered">
    <thead>
        <tr>                    
            <th>Keyword</th>
            <th>Sumber</th>
            <th>IP Lokasi</th>
            <th>Jumlah Pencarian</th>
            <th></th>
            <th>Aksi</th>
        </tr>
    </thead>
    <tbody>
        {% for item in counts %}
        <tr>
            <td>{{item.keyword}}</td>
            <td></td>
            <td></td>
            <td>{{item.keyword_count}}</td>
            <td></td>
            <td>
                <span class="spanFormat">
                    <a href="https://www.holahalo.com/search?q={{item.keyword}}&category_id_navbar%5B%5D=" target="_blank">
                        <button type="submit" class="btn btn-sm btn-primary">
                            <i class="fa fa-search"></i>
                        </button>
                    </a>
                </span>
                <span class="spanFormat">
                    <form action="">
                        <button type="button" class="btn btn-sm btn-warning">
                            <i class="far fa-chart-bar"></i>
                        </button>
                    </form>
                </span>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock content %}

{% block script %}
<script src="{% static 'js/keyword.js' %}"></script>
{% endblock script %}